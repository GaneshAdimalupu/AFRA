"use strict";(()=>{var e={};e.id=284,e.ids=[284,888,660],e.modules={1479:(e,t,a)=>{a.r(t),a.d(t,{config:()=>w,default:()=>m,getServerSideProps:()=>S,getStaticPaths:()=>b,getStaticProps:()=>x,reportWebVitals:()=>v,routeModule:()=>k,unstable_getServerProps:()=>_,unstable_getServerSideProps:()=>C,unstable_getStaticParams:()=>P,unstable_getStaticPaths:()=>y,unstable_getStaticProps:()=>j});var r={};a.r(r),a.d(r,{default:()=>f});var s=a(7093),o=a(5244),n=a(1323),l=a(9209),i=a.n(l),c=a(5702),u=a(997),d=a(1664),p=a.n(d),g=a(6689),h=a(8281);let f=(0,h.Z)(function(){let e=(0,g.useRef)(null),t=(0,g.useRef)(null),a=(0,g.useRef)(null),[r,s]=(0,g.useState)(""),[o,n]=(0,g.useState)(!1),[l,i]=(0,g.useState)(()=>""),getAttendance=async()=>{let e=await fetch("http://localhost/getAttendance",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:r}),credentials:"include"}),t=await e.json();console.log(t.url),i(()=>t.url.url.replaceAll('"',""))},handleClick=async()=>{stopCamera();let t=e.current.files[0],a=new FormData;a.append("code",r),a.append("file1",t);let s=await fetch("http://localhost/verify",{method:"POST",mode:"cors",headers:{},body:a,credentials:"include"}),o=await s.json();console.log(o);let n=[];if(200===s.status){console.log("jsh"),o.map(e=>{"unknown"!==e._label&&(n.push(e._label),console.log(n))});let e=await fetch("http://localhost/getStudents",{method:"POST",mode:"cors",headers:{"Content-Type":"application/json"},body:JSON.stringify({usns:n}),credentials:"include"}),t=await e.json();console.log(t)}console.log({courseCode:r,imageFile:t})},startCamera=async()=>{let e=await navigator.mediaDevices.getUserMedia({video:!0});t.current.srcObject=e,await t.current.play();let r=a.current.getContext("2d");r.drawImage(t.current,0,0,a.current.width,a.current.height),n(!0)},stopCamera=()=>{let e=t.current.srcObject;e.getTracks().forEach(e=>e.stop()),n(!1)};return(0,u.jsxs)(u.Fragment,{children:[(0,u.jsxs)("div",{className:"flex flex-col items-center max-w-md mx-auto mt-10",children:[u.jsx("input",{className:"shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline",type:"text",ref:e,value:r,onChange:e=>s(e.target.value),placeholder:"Enter course code"}),u.jsx("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4",disabled:!r,onClick:getAttendance,children:"getAttendance"}),l?u.jsx(p(),{href:l,children:"ATTENDANCE SHEET"}):u.jsx(u.Fragment,{}),u.jsx("button",{className:"bg-teal-500 hover:bg-teal-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4",disabled:!r,onClick:startCamera,children:"Start Camera"}),o&&u.jsx("button",{className:"bg-green-500 hover:bg-green-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline mt-4",onClick:handleClick,children:"Take Picture"}),u.jsx("video",{ref:t,className:"w-full h-auto mt-4",style:{objectFit:"cover"}}),u.jsx("canvas",{ref:a,style:{display:"none"}})]}),u.jsx("div",{className:"flex justify-center",children:u.jsx("input",{ref:e,className:"shadow appearance-none border rounded w-1/4 flex py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline bg-white",type:"file",name:"file1"})})]})}),m=(0,n.l)(r,"default"),x=(0,n.l)(r,"getStaticProps"),b=(0,n.l)(r,"getStaticPaths"),S=(0,n.l)(r,"getServerSideProps"),w=(0,n.l)(r,"config"),v=(0,n.l)(r,"reportWebVitals"),j=(0,n.l)(r,"unstable_getStaticProps"),y=(0,n.l)(r,"unstable_getStaticPaths"),P=(0,n.l)(r,"unstable_getStaticParams"),_=(0,n.l)(r,"unstable_getServerProps"),C=(0,n.l)(r,"unstable_getServerSideProps"),k=new s.PagesRouteModule({definition:{kind:o.x.PAGES,page:"/scan",pathname:"/scan",bundlePath:"",filename:""},components:{App:c.default,Document:i()},userland:r})},2785:e=>{e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},968:e=>{e.exports=require("next/head")},6689:e=>{e.exports=require("react")},6405:e=>{e.exports=require("react-dom")},997:e=>{e.exports=require("react/jsx-runtime")},7147:e=>{e.exports=require("fs")},1017:e=>{e.exports=require("path")},2781:e=>{e.exports=require("stream")},9796:e=>{e.exports=require("zlib")}};var t=require("../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[801,61,209,450,163,702,281],()=>__webpack_exec__(1479));module.exports=a})();